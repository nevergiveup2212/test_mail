<div id="login_form"></div>
<script>
Ext.onReady(function() {
    var login_form = new Ext.FormPanel({
        url: 'login_form.submit',
        id: 'newuser',
        renderTo: Ext.get("login_form"),
        frame: true,
        title: 'New user',
        width: 450,
        items: [{
                xtype: 'textfield',
                fieldLabel: 'Email:',
                name: 'lblemail',
                id: 'email',

                allowBlank: false,
                inputType: 'email'
            },
            {
                xtype: 'textfield',
                fieldLabel: 'Name:',
                name: 'lblpassword',
                id: 'name',
                allowBlank: false

            },
            {
                xtype: 'textfield',
                fieldLabel: 'Login:',
                name: 'lbllogin',
                id: 'login',
                allowBlank: false
            },
            {
                xtype: 'tbbutton',
                text: 'Create user',
                id: 'submit',
                listeners: {


        		
                    click: function() {
                        var name = Ext.getCmp('name').getValue();
                        var email = Ext.getCmp('email').getValue();
                        var login = Ext.getCmp('login').getValue();

                        Ext.Ajax.request({
                            url: '/create',

                            success: function(response, opts) {

                                location.href = 'http://localhost:3000/users';
                            },
                            jsonData: { name: name, email: email, login: login },

                        });
                    }

                }

            }, {
                xtype: 'tbbutton',
                text: 'Back',
                handler: function() {
                    location.href = 'http://localhost:3000/users';
                }

            }
        ]

    });

});
</script>